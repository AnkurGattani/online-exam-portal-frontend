<mat-card class="question-card">
    <mat-card-title>Add Question to Question Bank</mat-card-title>
    <mat-card-content>
        <form [formGroup]="questionForm" (ngSubmit)="onSubmit()" class="question-form">
            <!-- Question Text -->
            <mat-form-field appearance="outline" class="full-width">
                <mat-label>Question Text</mat-label>
                <textarea matInput formControlName="text" placeholder="Enter question"></textarea>
            </mat-form-field>

            <!-- Question Type -->
            <mat-form-field appearance="outline" class="full-width">
                <mat-label>Question Type</mat-label>
                <mat-select formControlName="type" (selectionChange)="onTypeChange($event.value)">
                    <mat-option value="MULTIPLE_CHOICE_QUESTION">Multiple Choice</mat-option>
                    <mat-option value="MULTIPLE_SELECT_QUESTION">Multiple Select</mat-option>
                    <mat-option value="NUMERIC">Numeric</mat-option>
                </mat-select>
            </mat-form-field>

            <!-- Difficulty -->
            <mat-form-field appearance="outline" class="full-width">
                <mat-label>Difficulty</mat-label>
                <mat-select formControlName="difficulty">
                    <mat-option value="EASY">Easy</mat-option>
                    <mat-option value="MEDIUM">Medium</mat-option>
                    <mat-option value="HARD">Hard</mat-option>
                </mat-select>
            </mat-form-field>

            <!-- Marks -->
            <mat-form-field appearance="outline" class="full-width">
                <mat-label>Marks</mat-label>
                <input matInput type="number" formControlName="marks" placeholder="Enter marks" />
            </mat-form-field>

            <!-- Options for MCQ/MSQ -->
            <div *ngIf="questionForm.get('type')?.value === 'MULTIPLE_CHOICE_QUESTION' || questionForm.get('type')?.value === 'MULTIPLE_SELECT_QUESTION'"
                formArrayName="options">
                <div *ngFor="let option of options.controls; let i = index" [formGroupName]="i" class="option-row">
                    <mat-form-field appearance="outline" class="option-input">
                        <mat-label>Option {{ i + 1 }}</mat-label>
                        <input matInput formControlName="text" placeholder="Enter option" />
                    </mat-form-field>
                    <mat-checkbox formControlName="isCorrect" (change)="onCorrectOptionChange(i)">Correct</mat-checkbox>
                    <button mat-icon-button color="warn" (click)="removeOption(i)" *ngIf="options.length > 2">
                        âœ–
                    </button>
                </div>
                <button mat-raised-button color="accent" type="button" (click)="addOption()">Add Option</button>
            </div>

            <!-- Numeric Answer -->
            <div *ngIf="questionForm.get('type')?.value === 'NUMERIC'" class="numeric-section">
                <mat-form-field appearance="outline" class="full-width">
                    <mat-label>Correct Answer</mat-label>
                    <input matInput formControlName="numericAnswer" placeholder="Enter numeric answer" />
                    <mat-error *ngIf="questionForm.get('numericAnswer')?.invalid">Only integers allowed!</mat-error>
                </mat-form-field>
            </div>

            <!-- Submit -->
            <div class="submit-btn">
                <button mat-raised-button color="primary" type="submit" [disabled]="questionForm.invalid">
                    Save Question
                </button>
            </div>
        </form>
    </mat-card-content>
</mat-card>